<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>FiberEquivalences</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library FiberEquivalences</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Fibrations.html#"><span class="id" type="library">Fibrations</span></a> <a class="idref" href="Equivalences.html#"><span class="id" type="library">Equivalences</span></a>.<br/>

<br/>
</div>

<div class="doc">
For compatibility with Coq 8.2. 
</div>
<div class="code">
<span class="id" type="keyword">Unset</span> <span class="id" type="var">Automatic</span> <span class="id" type="var">Introduction</span>.<br/>

<br/>
</div>

<div class="doc">
The map on total spaces induced by a map of fibrations 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="total_map"><span class="id" type="definition">total_map</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span> : <span class="id" type="keyword">Type</span>} {<span class="id" type="var">P</span> : <span class="id" type="var">A</span> -&gt; <span class="id" type="keyword">Type</span>} {<span class="id" type="var">Q</span> : <span class="id" type="var">B</span> -&gt; <span class="id" type="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">f</span> : <span class="id" type="var">A</span> -&gt; <span class="id" type="var">B</span>) (<span class="id" type="var">g</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>:<span class="id" type="var">A</span>, <span class="id" type="var">P</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">Q</span> (<span class="id" type="var">f</span> <span class="id" type="var">x</span>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <span class="id" type="var">P</span> -&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <span class="id" type="var">Q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">A</span> <span class="id" type="var">B</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;<span class="id" type="var">exists</span> (<span class="id" type="var">f</span> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (<span class="id" type="var">g</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>).<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We first consider maps between fibrations over the same base
   space.  The theorem is that such a map induces an equivalence on
   total spaces if and only if it is an equivalence on all fibers. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Section</span> <a name="FiberMap"><span class="id" type="section">FiberMap</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FiberMap.A"><span class="id" type="variable">A</span></a> : <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variables</span> <a name="FiberMap.P"><span class="id" type="variable">P</span></a> <a name="FiberMap.Q"><span class="id" type="variable">Q</span></a> : <a class="idref" href="FiberEquivalences.html#FiberMap.A"><span class="id" type="variable">A</span></a> -&gt; <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FiberMap.g"><span class="id" type="variable">g</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> -&gt; <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> <span class="id" type="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.tg"><span class="id" type="variable">tg</span></a> := <a class="idref" href="FiberEquivalences.html#total_map"><span class="id" type="definition">total_map</span></a> (<a class="idref" href="Functions.html#idmap"><span class="id" type="definition">idmap</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.A"><span class="id" type="variable">A</span></a>) <a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> (<span class="id" type="var">z</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a>) : <a class="idref" href="Fibrations.html#pr1"><span class="id" type="abbreviation">pr1</span></a> <span class="id" type="var">z</span> <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Fibrations.html#pr1"><span class="id" type="abbreviation">pr1</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.tg_isg_onfibers"><span class="id" type="variable">tg_isg_onfibers</span></a> (<span class="id" type="var">z</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">_</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> <span class="id" type="var">z</span>) (<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> <span class="id" type="var">z</span>)) <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.tg_isfib_onpaths"><span class="id" type="variable">tg_isfib_onpaths</span></a> (<span class="id" type="var">z</span> <span class="id" type="var">w</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a>) (<span class="id" type="var">p</span> : <span class="id" type="var">z</span> <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">w</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> <span class="id" type="var">z</span> <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> <span class="id" type="var">p</span>) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> <span class="id" type="var">w</span><a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> <span class="id" type="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_induction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">x</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Section</span> <a name="FiberMap.TotalIsEquiv"><span class="id" type="section">TotalIsEquiv</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <a name="FiberMap.TotalIsEquiv.tot_iseqv"><span class="id" type="variable">tot_iseqv</span></a> : <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a> : <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a><a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a><a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">)</span></a> := <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_iseqv"><span class="id" type="variable">tot_iseqv</span></a><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.TotalIsEquiv.ginv"><span class="id" type="variable">ginv</span></a> (<span class="id" type="var">x</span>:<a class="idref" href="FiberEquivalences.html#FiberMap.A"><span class="id" type="variable">A</span></a>) (<span class="id" type="var">y</span>: <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> <span class="id" type="var">x</span>) : <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">inv1</span> := <a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> ((<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a>) <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> ((<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a>) <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <a name="fiber_is_equiv"><span class="id" type="lemma">fiber_is_equiv</span></a> (<span class="id" type="var">x</span>:<a class="idref" href="FiberEquivalences.html#FiberMap.A"><span class="id" type="variable">A</span></a>) : <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">is_section</span> := <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">is_retraction</span> := <a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">triangle</span> := <a class="idref" href="Equivalences.html#inverse_triangle"><span class="id" type="definition">inverse_triangle</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#hequiv_is_equiv"><span class="id" type="definition">hequiv_is_equiv</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">g</span> := <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.ginv"><span class="id" type="variable">ginv</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<span class="id" type="var">P</span> := <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<span class="id" type="var">is_section</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<span class="id" type="var">is_section</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">_</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fibrations.html#trans_map"><span class="id" type="lemma">trans_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (<a class="idref" href="Fibrations.html#fiber_path"><span class="id" type="definition">fiber_path</span></a> (<span class="id" type="var">is_section</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> (<span class="id" type="var">is_retraction</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">ginv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#happly"><span class="id" type="definition">happly</span></a>, <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a>, <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#opposite"><span class="id" type="definition">opposite</span></a>, <span class="id" type="var">triangle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<span class="id" type="var">is_retraction</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>)<a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> (<span class="id" type="var">is_retraction</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>))<a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> ((<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a>) <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#opposite"><span class="id" type="definition">opposite</span></a>, <a class="idref" href="Fibrations.html#trans_concat"><span class="id" type="lemma">trans_concat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#happly"><span class="id" type="definition">happly</span></a>, <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv.tot_eqv"><span class="id" type="variable">tot_eqv</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">))</span></a>) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fibrations.html#base_path"><span class="id" type="definition">base_path</span></a> (<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> (<span class="id" type="var">is_retraction</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>)) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg_is_fiberwise"><span class="id" type="variable">tg_is_fiberwise</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <span class="id" type="var">y</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (<a class="idref" href="Fibrations.html#fiber_path"><span class="id" type="definition">fiber_path</span></a> (<span class="id" type="var">is_retraction</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="fiber_equiv"><span class="id" type="definition">fiber_equiv</span></a> (<span class="id" type="var">x</span>:<a class="idref" href="FiberEquivalences.html#FiberMap.A"><span class="id" type="variable">A</span></a>) : <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> <span class="id" type="var">x</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#fiber_is_equiv"><span class="id" type="lemma">fiber_is_equiv</span></a> <span class="id" type="var">x</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">End</span> <a class="idref" href="FiberEquivalences.html#FiberMap.TotalIsEquiv"><span class="id" type="section">TotalIsEquiv</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Section</span> <a name="FiberMap.FiberIsEquiv"><span class="id" type="section">FiberIsEquiv</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <a name="FiberMap.FiberIsEquiv.fiber_iseqv"><span class="id" type="variable">fiber_iseqv</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span> : <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> <span class="id" type="var">x</span> := <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_iseqv"><span class="id" type="variable">fiber_iseqv</span></a> <span class="id" type="var">x</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FiberMap.FiberIsEquiv.total_inv"><span class="id" type="variable">total_inv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> -&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">)^-1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <a name="total_is_equiv"><span class="id" type="lemma">total_is_equiv</span></a> : <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="Equivalences.html#hequiv_is_equiv"><span class="id" type="definition">hequiv_is_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">instantiate</span> (1 := <a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.total_inv"><span class="id" type="variable">total_inv</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="Fibrations.html#total_path"><span class="id" type="lemma">total_path</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">instantiate</span> (1 := <a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span> ((<a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span> <a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a>) <span class="id" type="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="Fibrations.html#total_path"><span class="id" type="lemma">total_path</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">instantiate</span> (1 := <a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span> <a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> (<a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv.fiber_eqv"><span class="id" type="variable">fiber_eqv</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="total_equiv"><span class="id" type="definition">total_equiv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.P"><span class="id" type="variable">P</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FiberMap.Q"><span class="id" type="variable">Q</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FiberMap.tg"><span class="id" type="variable">tg</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#total_is_equiv"><span class="id" type="lemma">total_is_equiv</span></a><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">End</span> <a class="idref" href="FiberEquivalences.html#FiberMap.FiberIsEquiv"><span class="id" type="section">FiberIsEquiv</span></a>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="FiberEquivalences.html#FiberMap"><span class="id" type="section">FiberMap</span></a>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fiber_equiv"><span class="id" type="definition">fiber_equiv</span></a> [<span class="id" type="var">A</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fiber_is_equiv"><span class="id" type="lemma">fiber_is_equiv</span></a> [<span class="id" type="var">A</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#total_equiv"><span class="id" type="definition">total_equiv</span></a> [<span class="id" type="var">A</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#total_is_equiv"><span class="id" type="lemma">total_is_equiv</span></a> [<span class="id" type="var">A</span>].<br/>

<br/>
</div>

<div class="doc">
Next we consider a fibration over one space and its pullback along
   a map from another base space.  The theorem is that if the map we
   pull back along is an equivalence, so is the induced map on total
   spaces. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Section</span> <a name="PullbackMap"><span class="id" type="section">PullbackMap</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variables</span> <a name="PullbackMap.A"><span class="id" type="variable">A</span></a> <a name="PullbackMap.B"><span class="id" type="variable">B</span></a> : <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="PullbackMap.Q"><span class="id" type="variable">Q</span></a> : <a class="idref" href="FiberEquivalences.html#PullbackMap.B"><span class="id" type="variable">B</span></a> -&gt; <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="PullbackMap.f"><span class="id" type="variable">f</span></a> : <a class="idref" href="FiberEquivalences.html#PullbackMap.A"><span class="id" type="variable">A</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.B"><span class="id" type="variable">B</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="PullbackMap.pbQ"><span class="id" type="variable">pbQ</span></a> : <a class="idref" href="FiberEquivalences.html#PullbackMap.A"><span class="id" type="variable">A</span></a> -&gt; <span class="id" type="keyword">Type</span> := <a class="idref" href="FiberEquivalences.html#PullbackMap.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="Functions.html#::x_'o'_x"><span class="id" type="notation">o</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="PullbackMap.g"><span class="id" type="variable">g</span></a> (<span class="id" type="var">x</span>:<a class="idref" href="FiberEquivalences.html#PullbackMap.A"><span class="id" type="variable">A</span></a>) : <a class="idref" href="FiberEquivalences.html#PullbackMap.pbQ"><span class="id" type="variable">pbQ</span></a> <span class="id" type="var">x</span> -&gt; <a class="idref" href="FiberEquivalences.html#PullbackMap.Q"><span class="id" type="variable">Q</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) := <a class="idref" href="Functions.html#idmap"><span class="id" type="definition">idmap</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.Q"><span class="id" type="variable">Q</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="PullbackMap.tg"><span class="id" type="variable">tg</span></a> := <a class="idref" href="FiberEquivalences.html#total_map"><span class="id" type="definition">total_map</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.g"><span class="id" type="variable">g</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="PullbackMap.tginv"><span class="id" type="variable">tginv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.Q"><span class="id" type="variable">Q</span></a> -&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.pbQ"><span class="id" type="variable">pbQ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">z</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">exists</span> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a><a class="idref" href="Equivalences.html#::x_'^-1'"><span class="id" type="notation">^-1</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a> <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <a name="pullback_total_is_equiv"><span class="id" type="lemma">pullback_total_is_equiv</span></a> : <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.tg"><span class="id" type="variable">tg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#hequiv_is_equiv"><span class="id" type="definition">hequiv_is_equiv</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">g</span> := <a class="idref" href="FiberEquivalences.html#PullbackMap.tginv"><span class="id" type="variable">tginv</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">z</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fibrations.html#total_path"><span class="id" type="lemma">total_path</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">p</span> := <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a> <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span> <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#opposite"><span class="id" type="definition">opposite</span></a>, <a class="idref" href="Fibrations.html#trans_concat"><span class="id" type="lemma">trans_concat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">x</span>) <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">f</span> := <span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> <span class="id" type="var">p</span> <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">cancel_opposites</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">z</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fibrations.html#total_path"><span class="id" type="lemma">total_path</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">p</span> := <a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)) <span class="id" type="var">z</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fibrations.html#map_trans"><span class="id" type="lemma">map_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)) <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Paths.html#opposite"><span class="id" type="definition">opposite</span></a>, <a class="idref" href="Fibrations.html#trans_concat"><span class="id" type="lemma">trans_concat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">path_via</span> (<a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> (<a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)) <span class="id" type="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> : <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)<a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Paths.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">moveright_onleft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">cancel_units</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Equivalences.html#inverse_triangle"><span class="id" type="definition">inverse_triangle</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (@<a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> (<a class="idref" href="Paths.html#::'!'_x"><span class="id" type="notation">!</span></a><a class="idref" href="Equivalences.html#inverse_is_section"><span class="id" type="definition">inverse_is_section</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) <a class="idref" href="Paths.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="Paths.html#map"><span class="id" type="lemma">map</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> (<a class="idref" href="Equivalences.html#inverse_is_retraction"><span class="id" type="definition">inverse_is_retraction</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Paths.html#idpath"><span class="id" type="constructor">idpath</span></a> (<a class="idref" href="FiberEquivalences.html#PullbackMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Fibrations.html#transport"><span class="id" type="lemma">transport</span></a> <span class="id" type="var">p</span> <span class="id" type="var">z</span>) <span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="pullback_total_equiv"><span class="id" type="definition">pullback_total_equiv</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.pbQ"><span class="id" type="variable">pbQ</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#PullbackMap.Q"><span class="id" type="variable">Q</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">_</span> <a class="idref" href="FiberEquivalences.html#PullbackMap.tg"><span class="id" type="variable">tg</span></a> <a class="idref" href="FiberEquivalences.html#pullback_total_is_equiv"><span class="id" type="lemma">pullback_total_is_equiv</span></a>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="FiberEquivalences.html#PullbackMap"><span class="id" type="section">PullbackMap</span></a>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#pullback_total_is_equiv"><span class="id" type="lemma">pullback_total_is_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#pullback_total_equiv"><span class="id" type="definition">pullback_total_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>

<br/>
</div>

<div class="doc">
Finally, we can put these together to prove that given a map of
   fibrations lying over an equivalence of base spaces, the induced
   map on total spaces is an equivalence if and only if the map on
   each fiber is an equivalence. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Section</span> <a name="FibrationMap"><span class="id" type="section">FibrationMap</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variables</span> <a name="FibrationMap.A"><span class="id" type="variable">A</span></a> <a name="FibrationMap.B"><span class="id" type="variable">B</span></a> : <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FibrationMap.P"><span class="id" type="variable">P</span></a> : <a class="idref" href="FiberEquivalences.html#FibrationMap.A"><span class="id" type="variable">A</span></a> -&gt; <span class="id" type="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FibrationMap.Q"><span class="id" type="variable">Q</span></a> : <a class="idref" href="FiberEquivalences.html#FibrationMap.B"><span class="id" type="variable">B</span></a> -&gt; <span class="id" type="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FibrationMap.f"><span class="id" type="variable">f</span></a> : <a class="idref" href="FiberEquivalences.html#FibrationMap.A"><span class="id" type="variable">A</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.B"><span class="id" type="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <a name="FibrationMap.g"><span class="id" type="variable">g</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>:<a class="idref" href="FiberEquivalences.html#FibrationMap.A"><span class="id" type="variable">A</span></a>, <a class="idref" href="FiberEquivalences.html#FibrationMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> -&gt; <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FibrationMap.tg"><span class="id" type="variable">tg</span></a> := <a class="idref" href="FiberEquivalences.html#total_map"><span class="id" type="definition">total_map</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FibrationMap.pbQ"><span class="id" type="variable">pbQ</span></a> := <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="Functions.html#::x_'o'_x"><span class="id" type="notation">o</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FibrationMap.pbg"><span class="id" type="variable">pbg</span></a> (<span class="id" type="var">x</span> : <a class="idref" href="FiberEquivalences.html#FibrationMap.A"><span class="id" type="variable">A</span></a>) : <a class="idref" href="FiberEquivalences.html#FibrationMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> -&gt; <a class="idref" href="FiberEquivalences.html#FibrationMap.pbQ"><span class="id" type="variable">pbQ</span></a> <span class="id" type="var">x</span> := <a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <a name="fibseq_fiber_is_equiv"><span class="id" type="lemma">fibseq_fiber_is_equiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.tg"><span class="id" type="variable">tg</span></a> -&gt; <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">pbmap_equiv</span> := <a class="idref" href="FiberEquivalences.html#pullback_total_is_equiv"><span class="id" type="lemma">pullback_total_is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="FiberEquivalences.html#fiber_is_equiv"><span class="id" type="lemma">fiber_is_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#equiv_cancel_left"><span class="id" type="definition">equiv_cancel_left</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">C</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a>) (<span class="id" type="var">g</span> := <a class="idref" href="FiberEquivalences.html#pullback_total_equiv"><span class="id" type="definition">pullback_total_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#equiv_homotopic"><span class="id" type="lemma">equiv_homotopic</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">g</span> := <a class="idref" href="FiberEquivalences.html#FibrationMap.tg"><span class="id" type="variable">tg</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="fibseq_fiber_equiv"><span class="id" type="definition">fibseq_fiber_equiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.tg"><span class="id" type="variable">tg</span></a> -&gt; <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="FiberEquivalences.html#FibrationMap.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">x</span> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">H</span> <span class="id" type="var">x</span> =&gt; <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#fibseq_fiber_is_equiv"><span class="id" type="lemma">fibseq_fiber_is_equiv</span></a> <span class="id" type="var">H</span> <span class="id" type="var">x</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="FibrationMap.fibseq_a_totalequiv"><span class="id" type="variable">fibseq_a_totalequiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>)) -&gt; (<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.P"><span class="id" type="variable">P</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#equiv_compose"><span class="id" type="definition">equiv_compose</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">B</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.pbQ"><span class="id" type="variable">pbQ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">exists</span> (<a class="idref" href="FiberEquivalences.html#total_map"><span class="id" type="definition">total_map</span></a> (<a class="idref" href="Functions.html#idmap"><span class="id" type="definition">idmap</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.A"><span class="id" type="variable">A</span></a>) <a class="idref" href="FiberEquivalences.html#FibrationMap.pbg"><span class="id" type="variable">pbg</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="FiberEquivalences.html#total_is_equiv"><span class="id" type="lemma">total_is_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="FiberEquivalences.html#pullback_total_equiv"><span class="id" type="definition">pullback_total_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <a name="fibseq_total_is_equiv"><span class="id" type="lemma">fibseq_total_is_equiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>)) -&gt; <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.tg"><span class="id" type="variable">tg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> @<a class="idref" href="Equivalences.html#equiv_homotopic"><span class="id" type="lemma">equiv_homotopic</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">g</span> := <a class="idref" href="FiberEquivalences.html#FibrationMap.fibseq_a_totalequiv"><span class="id" type="variable">fibseq_a_totalequiv</span></a> <span class="id" type="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> [<span class="id" type="var">x</span> <span class="id" type="var">y</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (<a class="idref" href="Fibrations.html#pr2"><span class="id" type="abbreviation">pr2</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.fibseq_a_totalequiv"><span class="id" type="variable">fibseq_a_totalequiv</span></a> <span class="id" type="var">H</span>)).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="fibseq_total_equiv"><span class="id" type="definition">fibseq_total_equiv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <a class="idref" href="Equivalences.html#is_equiv"><span class="id" type="definition">is_equiv</span></a> (<a class="idref" href="FiberEquivalences.html#FibrationMap.g"><span class="id" type="variable">g</span></a> <span class="id" type="var">x</span>)) -&gt; (<a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.P"><span class="id" type="variable">P</span></a> <a class="idref" href="Equivalences.html#::x_'<~>'_x"><span class="id" type="notation">&lt;~&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl1/stdlib/Coq.Init.Specif.html#sigT"><span class="id" type="inductive">sigT</span></a> <a class="idref" href="FiberEquivalences.html#FibrationMap.Q"><span class="id" type="variable">Q</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">H</span> =&gt; <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="FiberEquivalences.html#FibrationMap.tg"><span class="id" type="variable">tg</span></a> <a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="FiberEquivalences.html#fibseq_total_is_equiv"><span class="id" type="lemma">fibseq_total_is_equiv</span></a> <span class="id" type="var">H</span><a class="idref" href="Fibrations.html#::'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="FiberEquivalences.html#FibrationMap"><span class="id" type="section">FibrationMap</span></a>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fibseq_fiber_is_equiv"><span class="id" type="lemma">fibseq_fiber_is_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fibseq_fiber_equiv"><span class="id" type="definition">fibseq_fiber_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fibseq_total_is_equiv"><span class="id" type="lemma">fibseq_total_is_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="FiberEquivalences.html#fibseq_total_equiv"><span class="id" type="definition">fibseq_total_equiv</span></a> [<span class="id" type="var">A</span> <span class="id" type="var">B</span>].<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>